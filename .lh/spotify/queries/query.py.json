{
    "sourceFile": "spotify/queries/query.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1671724399201,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1671724414103,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,8 +82,8 @@\n         list_of_song_comments.append(result['comment']['value'])\r\n         list_of_artist_labels.append(result['artistLabel']['value'])\r\n         list_of_album_labels.append(result['albumsLabel']['value'])\r\n         list_of_writer_labels.append(result['writersLabel']['value'])\r\n-    return {\"songs\": list_of_song_labels, \"comments\": list_of_song_comments, \"artistLabels\": list_of_artist_labels, \"album labels\": list_of_album_labels, \"writer labels\": list_of_writer_labels}\r\n+    return {\"songs\": list_of_song_labels, \"comments\": list_of_song_comments, \"artist_labels\": list_of_artist_labels, \"album labels\": list_of_album_labels, \"writer labels\": list_of_writer_labels}\r\n \r\n # print(get_songs_and_artists())\r\n print(get_song_detail(\"What About Now (Daughtry song)\", \"Daughtry (band)\"))\r\n"
                },
                {
                    "date": 1671724420254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,8 +82,8 @@\n         list_of_song_comments.append(result['comment']['value'])\r\n         list_of_artist_labels.append(result['artistLabel']['value'])\r\n         list_of_album_labels.append(result['albumsLabel']['value'])\r\n         list_of_writer_labels.append(result['writersLabel']['value'])\r\n-    return {\"songs\": list_of_song_labels, \"comments\": list_of_song_comments, \"artist_labels\": list_of_artist_labels, \"album labels\": list_of_album_labels, \"writer labels\": list_of_writer_labels}\r\n+    return {\"songs\": list_of_song_labels, \"comments\": list_of_song_comments, \"artist_labels\": list_of_artist_labels, \"album_labels\": list_of_album_labels, \"writer_labels\": list_of_writer_labels}\r\n \r\n # print(get_songs_and_artists())\r\n print(get_song_detail(\"What About Now (Daughtry song)\", \"Daughtry (band)\"))\r\n"
                }
            ],
            "date": 1671724399201,
            "name": "Commit-0",
            "content": "import rdflib\r\nimport rdfextras\r\nfrom SPARQLWrapper import SPARQLWrapper, JSON\r\n\r\nprefix_dict = {\r\n    \"ex\": \"http://example.org/data/\",\r\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\r\n    \"foaf\": \"http://xmlns.com/foaf/0.1/\",\r\n    \"dbr\": \"http://dbpedia.org/resource/\",\r\n    \"dbp\": \"http://dbpedia.org/property/\",\r\n    \"dbo\": \"http://dbpedia.org/ontology/\",\r\n    \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\r\n    \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\r\n    \"owl\": \"http://www.w3.org/2002/07/owl#\",\r\n    \"dct\": \"http://purl.org/dc/terms/\",\r\n    \"dbc\": \"http://dbpedia.org/page/Category:\",\r\n}\r\n\r\ndef get_songs_and_artists():\r\n    sparql = SPARQLWrapper(\"http://dbpedia.org/sparql\")\r\n    sparql.setQuery(\r\n    \"\"\"\r\n    PREFIX dbo: <http://dbpedia.org/ontology/>\r\n    PREFIX dbr: <http://dbpedia.org/resource/>\r\n    SELECT distinct ?songLabel ?artistLabel\r\n    WHERE {\r\n        ?song a dbo:Song .\r\n        ?song dbo:artist ?artist .\r\n        ?song rdfs:label ?songLabel .\r\n        ?artist rdfs:label ?artistLabel .\r\n        FILTER (langMatches(lang(?artistLabel), \"EN\") && langMatches(lang(?artistLabel), \"EN\"))\r\n    }\r\n    ORDER BY ASC(?song)\r\n    LIMIT 20\r\n    \"\"\")\r\n    sparql.setReturnFormat(JSON)\r\n    results = sparql.query().convert()[\"results\"][\"bindings\"]\r\n\r\n    list_of_songs = []\r\n    list_of_artists = []\r\n    for result in results:\r\n        list_of_songs.append(result['songLabel']['value'])\r\n        list_of_artists.append(result['artistLabel']['value'])\r\n    return {\"songs\": list_of_songs, \"artists\": list_of_artists}\r\n\r\ndef get_song_detail(songLabel, artistLabel):\r\n    sparql = SPARQLWrapper(\"http://dbpedia.org/sparql\")\r\n    songLabel = f\"\\\"{songLabel}\\\"\"\r\n    artistLabel = f\"\\\"{artistLabel}\\\"\"\r\n    query = \"\"\"\r\n    PREFIX dbo: <http://dbpedia.org/ontology/>\r\n    PREFIX dbr: <http://dbpedia.org/resource/>\r\n    SELECT distinct ?songLabel ?comment ?artistLabel (GROUP_CONCAT(?albumsLabel ; separator=\"; \") AS ?albumsLabel) (GROUP_CONCAT(?writersLabel ; separator=\"; \") AS ?writersLabel)\r\n    WHERE {\r\n        ?song a dbo:Song .\r\n        ?song dbo:artist ?artist .\r\n        ?song rdfs:comment ?comment .\r\n        ?song dbp:album ?album .\r\n        ?song dbp:writer ?writers .\r\n        ?song dbo:producer ?producers .\r\n\r\n        ?producers rdfs:label ?producersLabel .\r\n        ?writers rdfs:label ?writersLabel .\r\n        ?album rdfs:label ?albumsLabel .\r\n        ?song rdfs:label ?songLabel .\r\n        ?artist rdfs:label ?artistLabel .\r\n        FILTER (langMatches(lang(?artistLabel), \"EN\") && langMatches(lang(?songLabel), \"EN\") &&\r\n        langMatches(lang(?albumsLabel), \"EN\") && langMatches(lang(?writersLabel), \"EN\") &&\r\n        langMatches(lang(?producersLabel), \"EN\") && langMatches(lang(?comment), \"EN\") && ?songLabel = \"\"\" + songLabel + \"@en\" + \"&& ?artistLabel = \" + artistLabel + \"@en)}\" \r\n    sparql.setQuery(query)\r\n    sparql.setReturnFormat(JSON)\r\n    results = sparql.query().convert()[\"results\"][\"bindings\"]\r\n\r\n    list_of_song_labels = []\r\n    list_of_song_comments = []\r\n    list_of_artist_labels = []\r\n    list_of_album_labels = []\r\n    list_of_writer_labels = []\r\n\r\n    for result in results:\r\n        list_of_song_labels.append(result['songLabel']['value'])\r\n        list_of_song_comments.append(result['comment']['value'])\r\n        list_of_artist_labels.append(result['artistLabel']['value'])\r\n        list_of_album_labels.append(result['albumsLabel']['value'])\r\n        list_of_writer_labels.append(result['writersLabel']['value'])\r\n    return {\"songs\": list_of_song_labels, \"comments\": list_of_song_comments, \"artistLabels\": list_of_artist_labels, \"album labels\": list_of_album_labels, \"writer labels\": list_of_writer_labels}\r\n\r\n# print(get_songs_and_artists())\r\nprint(get_song_detail(\"What About Now (Daughtry song)\", \"Daughtry (band)\"))\r\n"
        }
    ]
}